<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<script src="http://192.168.0.2:8888/socket.io/socket.io.js"></script>
	<title>Battle royale</title>
	<style>
		*{
			font-family: sans-serif;
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			-webkit-touch-callout: none; 
            -webkit-user-select: none; 
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
		}
		body{
			position: relative;
			overflow: hidden;
		}
		canvas#gameScreen{
			cursor: none;
		}
		
		#mapContainer{
			border-radius: 10px;
			position: absolute;
			bottom:20px;
			left:20px;
			z-index: 5;
			background: rgba(128, 128, 128, 0.5);
		}
		#zoneTimer{
			z-index: 8;
			position:relative;
			top:-60px;
			margin: auto;
			height: 40px;
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
			color:white;
			font-size: 130%;
			line-height: 40px;
			text-align: center;
		}
		svg#mapZoneSVG{
			border-radius: 10px;
			position: absolute;
			bottom:20px;
			left:20px;
			z-index: 5;
			margin-left: 5px;
			margin-bottom: 5px;
		}
		canvas#mapScreen{
			border-radius: 10px;
			position: absolute;
			bottom:20px;
			left:20px;
			z-index: 5;
			margin-left: 5px;
			margin-bottom: 5px;
		}
		canvas#helperScreen{
			display: none;
			position: absolute;
			top:0;
			left:0;
		}
		.menu{
			border-radius: 5px;
			border: 3px solid gray;
			background: silver;
			width: 250px;
			height: 250px;
			position: absolute;
			top: 50%;
			left: 50%;
			margin-left: -125px;
			margin-top: -125px;
			padding: 0 20px;
			display: none;
			z-index: 10;
		}
		#editorContainer{
			display: none;
		}
		#editorMenuContainer{
			width: 15%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 0;
			background: silver;
			overflow: scroll;
		}
		#editorScreenContainer{
			width: 85%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 15%;
			overflow: scroll;
			background: white;
		}
		#editorMenuContainer img{
			width: 100px;
			height: 100px;
			background:#A2CB69;
			border: 1px solid gray;
		}
		#editorMenuContainer img:hover{
			border-color: red !important;
		}

		#terrainWaterTriangle2{
			transform:rotate(90deg);
		}
		#terrainWaterTriangle3{
			transform:rotate(180deg);
		}
		#terrainWaterTriangle4{
			transform:rotate(270deg);
		}
		#zoneSVG{
			position: absolute;
			top:0;
			left:0;
		}
		#mainMenu{
			display: block;
		}
		#alertMenu{
			background: pink;
		}
		#healthBar{
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
			padding: 5px;
			width: 300px;
			height:40px;
			position: absolute;
			bottom: 20px;
			left:50%;
			margin-left: -150px;
		}
		#healthBarIn{
			background: rgba(255, 255, 255, 1);
			border-radius: 7px;
			height: 100%;
			width:100%;
		}
		#activeGunAmmo{
			position: absolute;
			z-index: 8;
			text-align: center;
			line-height: 50px;
			width: 50px;
			height: 50px;
			bottom: 80px;
			left:50%;
			margin-left:-25px;
			font-family: sans-serif;
			font-size: 200%;
			color: white;
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
		}
		#loading{
			width:80px;
			height:80px;
			position: absolute;
			z-index: 8;
			top:50%;
			left:50%;
			margin-top: -230px;
			margin-left: -40px;
			display: none;
		}
		#loadingText, #takeLoot, #spectacle{
			font-size: 200%;
			text-align: center;
			line-height: 50px;
			color: white;
			width:200px;
			height:50px;
			position: absolute;
			z-index: 8;
			top:50%;
			left:50%;
			margin-top: -150px;
			margin-left: -100px;
			display: none;
		}
		#takeLoot{
			display: block;
		}
		#transparentLayer{
			width: 100%;
			height:100%;
			opacity: 0.5;
			position: absolute;
			top:0;
			left:0;
			z-index:9;
			cursor:url(img/cursor.png) 12 12, auto;
		}
		#items{
			width:200px;
			position: absolute;
			z-index: 8;
			bottom:20px;
			right:20px;
		}
		#items div{
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
			color:white;
			font-weight: bold;
			padding: 10px;
			padding-left:0;
			margin-bottom:10px;
			height: 37px;
		}
		#items div:last-child{
			margin-bottom:0;

		}
		.active{
			background: rgba(0, 0, 0, 0.5) !important;
		}
		#items b{
			border-top-left-radius: 10px;
			border-bottom-left-radius: 10px;
			background: rgba(0, 0, 0, 0.5);
			padding: 10px;
		}

		#ammo{
			padding:0 !important;

		}

		#redAmmo, #blueAmmo, #greenAmmo, #orangeAmmo{
			width: 25%;
			height: 100%;
			display:block;
			float:left;
			text-align: center;
			line-height: 37px;
		}
		#redAmmo{
			background: red;
			border-top-left-radius: 10px;
			border-bottom-left-radius: 10px;
			
		}
		#blueAmmo{
			background: blue;
		}
		#greenAmmo{
			background: green;
		}
		#orangeAmmo{
			background: orange;
			border-top-right-radius: 10px;
			border-bottom-right-radius: 10px;
		}
		#item1Ammo, #item2Ammo{
			background: transparent;
			display: block;
			float:right;
			width: 17px;
			height: 17px;

		}
		#alive{
			z-index: 8;
			position:absolute;
			top:20px;
			left: 20px;
			width: 70px;
			height: 70px;
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
			color:white;
			font-size: 300%;
			line-height: 70px;
			text-align: center;
		}
		#aliveText{
			z-index: 8;
			font-size: 110%;
			width: 70px;
			text-align: center;
			color:white;
			position:absolute;
			top:100px;
			left: 20px;
		}
		#topItems{
			z-index: 8;
			position: absolute;
			top: 20px;
  			left: 50%;
  			transform: translate(-50%, 0);
		}
		#vest, #scope{
			margin: 0 10px;
			float:left;
			width: 50px;
			height: 50px;
			border-radius: 10px;
			background: rgba(128, 128, 128, 0.5);
			display: none;
		}
		#vest img, #scope img, #scope svg{
			width: 100%;
			height: 100%;
		}

		#messages{
			z-index: 8;
			position: absolute;
			top: 20px;
  			right: 20px;
			width: 400px;
		}
		#messages p{
			float: right;
			clear: both;
			background: rgba(128, 128, 128, 0.5);
			border-radius: 10px;
			margin-bottom: 10px;
			padding: 7px;
			color:white;
		}

	</style>
</head>
<body>
	<canvas id="gameScreen" width="1" height="1"></canvas>
	<svg id="zoneSVG" width="0" height="0">
		<mask id="maskSVG">
			<rect fill="white" width="100%" height="100%"/>
			<circle id="zoneCircle" cx="0" cy="0" r="0" fill="black" />
		</mask>
		<rect id="zoneRect" mask="url(#maskSVG)" fill="red" width="100%" height="100%" opacity="0.5" />
	</svg>

	<div id="alive">0</div>
	<div id="aliveText">Alive</div>


	<div id="topItems">
		<div id="scope"><img src="img/scopeTop.svg"></div>
		<div id="vest"><img src="img/vestTop.svg"></div>
	</div>

	<div id="messages">
		<p>PlayerA killed playerB with Rifle</p>
		<p>PlayerASD killed playerERZ with Hand</p>
	</div>

	<div id="mapContainer"><div id="zoneTimer"></div></div>

	<canvas id="mapScreen" width="1" height="1"></canvas>
	<svg id="mapZoneSVG" width="0" height="0">
		<mask id="mapMaskSVG">
			<rect fill="white" width="100%" height="100%"/>
			<circle id="mapZoneCircle" cx="0" cy="0" r="0" fill="black" />
		</mask>
		<rect id="mapZoneRect" mask="url(#mapMaskSVG)" fill="black" width="100%" height="100%" opacity="0.5" />
	</svg>
    <div id="items">
		
		<div id='item1'><b>1</b> <span></span> <span id="item1Ammo"></span></div>
		<div id='item2'><b>2</b> <span></span> <span id="item2Ammo"></span></div>
		<div id='item3'><b>3</b> <span></span> </div>
		<div id='item4'><b>4</b> <span></span></div>
		<div id='item5'><b>5</b> <span></span></div>

		<div id='ammo'>
			<span id='redAmmo'>0</span>
			<span id='blueAmmo'>0</span>
			<span id='greenAmmo'>0</span>
			<span id='orangeAmmo'>0</span>
		</div>
	</div>
	<div id="activeGunAmmo"></div>
	<div id="healthBar"><div id="healthBarIn"></div></div>
	<svg id="loading" viewBox="0 0 36 36">
			<path opacity="0.5"
			d="M18 2.0845
			  a 15.9155 15.9155 0 0 1 0 31.831
			  a 15.9155 15.9155 0 0 1 0 -31.831"
			fill="none"
			stroke="gray";
			stroke-width="2";
			stroke-dasharray="100, 100"
		  />
		<path id="loadingCircle"
		  d="M18 2.0845
			a 15.9155 15.9155 0 0 1 0 31.831
			a 15.9155 15.9155 0 0 1 0 -31.831"
		  fill="none"
		  stroke="white";
		  stroke-width="2";
		  stroke-dasharray="95, 100"
		/>
		<text id="loadingCounter" x="8" y="23" fill="white" font-family="Sans-serif" font-size="14"></text>
	</svg>
	<div id="loadingText"></div>
	<div id="takeLoot"></div>
	<div id="spectacle"></div>
	<div id="transparentLayer"></div>
	
	<div class="menu" id="mainMenu">
		<h1>Mini battle royale</h1>
		<p id="mainMenuIp">+</p>
		<input id="mainMenuName" type="text" maxlength="20" placeholder="Your name" value="" autocomplete="off" autofocus>
		<h2>Join</h2>
		<select id="mainMenuGames" disabled></select>
		<button id="mainMenuJoin" disabled>Join the game</button>
		<h2>Create</h2>
		<select id="mainMenuMaps"></select>
		<button id="mainMenuCreate" disabled>Create a new game</button>
		
		<button id="mainMenuOpenEditor">Map editor</button>
		<button id="mainMenuControls">Game controls</button>
	</div>

	<div class="menu" id="lobbyMenu">
		<h1 id="lobbyMenuGameName"></h1>
		<ul id="lobbyMenuPlayers"></ul>
		<div id="lobbyMenuForJoinPlayer">
			<p>Waiting for players...</p>
			<button id="lobbyMenuLeave">Leave the game</button>
		</div>
		<div id="lobbyMenuForCreatePlayer">
			<button id="lobbyMenuStart">Launch the game</button>
			<button id="lobbyMenuCancel">Cancel the game</button>
		</div>
	</div>		

	<div class="menu" id="mapSizeMenu">
			<h1>Map size</h1>
			<p>Size [blocks]</p>
			<select id="mapSizeValue">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5" selected>5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>
			</select>
			<p>
				<button id="mapSizeOk">OK</button>
				<button id="mapSizeBack">Back</button>
			</p>
	</div>

	<div class="menu" id="mapMenu">
        <h1>Map editor</h1>
        <button id="mapMenuCreate">Create a new map</button>
        <button id="mapMenuOpenMap">Open the created maps</button>
        <button id="mapMenuBack">Back</button>
	</div>

	<div class="menu" id="mapEditorMenu">
		<h1>Map editor</h1>
		<input id="mapEditorMenuName" type="text" maxlength="20" placeholder="Map name" value="" autocomplete="off">
		<button id="mapEditorMenuSave">Save</button>
		<button id="mapEditorMenuChangeSize">Change map size</button>
		<button id="mapEditorMenuBack">Back</button>
		<button id="mapEditorMenuClose">Close editor</button>
	</div>

	<div class="menu" id="openMapMenu">
        <h1>Open map</h1>
        <select id="openMapMenuMaps"></select>
        <button id="openMapMenuOk">OK</button>
        <button id="openMapMenuBack">Back</button>
	</div>
	
	<div class="menu" id="controlsMenu">
        <h1>Game controls</h1>
        <p>Move: <b>A, W, S, D</b>.</p>
        <p>Hit / Shoot: <b>Mouse</b>.</p>
        <button id="controlsMenuBack">Back</button>
	</div>

	<div class="menu" id="gameOverMenu">
		<h1 id="gameOverMenuH1">You win!</h1>
		<div id="gameOverMenuStats">
			
		</div>
		<button id="gameOverMenuSpectacle">Spectacle</button>
        <button id="gameOverMenuBack">Main menu</button>
	</div>
	
	<div class="menu" id="alertMenu">
		<h1>Not allowed character!</h1>
		<p>Please change that name.</p>
		<p>Allowed characters:</p>
		<p><b>abcdefghijklmnopqrstuvwxyz</b><br /><b>ABCDEFGHIJKLMNOPQRSTUVWXYZ</b><br /><b>0123456789</b><br /> and <b>space</b></p>
		<button id="alertMenuOk">OK</button>
	</div>

	<div id="editorContainer">
		<div id="editorMenuContainer">
			<button id="editorOpenMenu">Editor menu</button>
			<div id="editorCoordinates"></div>
			<div id="editorTerrainImgs">
				<img id="terrainWater" src="img/water.png">
				<img id="terrainGrass" src="img/grass.png">
				<img id="terrainWaterTriangle3" src="img/waterTriangle.png">
				<img id="terrainWaterTriangle4" src="img/waterTriangle.png">
				<img id="terrainWaterTriangle2" src="img/waterTriangle.png">
				<img id="terrainWaterTriangle1" src="img/waterTriangle.png">
			</div>
			<div id="editorObjectImgs">
				<img id="editorObjectBush" src="img/bush.svg">
				<img id="editorObjectRock" src="img/rock.svg">
				<img id="editorObjectTree" src="img/tree.svg">
				<img id="editorObjectRect" src="img/rect.png">
				<img id="editorObjectDelete" src="img/delete.png">
			</div>
		</div>
		<div id="editorScreenContainer">
			<canvas id="editorScreen" width="1" height="1"></canvas>
		</div>
	</div>
	<canvas id="helperScreen"></canvas>
	<script src="app.js"></script>
</body>
</html>